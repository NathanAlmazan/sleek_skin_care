<!DOCTYPE html>
<html lang="en">
  <%- include('../partials/head'); %>
  <body>
    <%- include('../partials/header'); %>
    <!-- ======== Main Banner ======= -->
    <section class="container">
      <div class="row main-banner">
          <div class="col-sm-12 col-md-8 p-0">
              <div class="main-image">
                  <div id="carouselExampleIndicators" class="carousel slide" data-ride="carousel">
                      <ol class="carousel-indicators">
                        <li data-target="#carouselExampleIndicators" data-slide-to="0" class="active"></li>
                        <li data-target="#carouselExampleIndicators" data-slide-to="1"></li>
                        <li data-target="#carouselExampleIndicators" data-slide-to="2"></li>
                      </ol>
                      <div class="carousel-inner">
                        <div class="carousel-item active">
                          <img class="d-block w-100" src="img/slider2.png" alt="First slide">
                        </div>
                        <div class="carousel-item">
                          <img class="d-block w-100" src="img/slider22.png" alt="Second slide">
                        </div>
                        <div class="carousel-item">
                          <img class="d-block w-100" src="img/slider3.png" alt="Third slide">
                        </div>
                        <div class="carousel-item">
                          <img class="d-block w-100" src="img/slider4.png" alt="Third slide">
                        </div>
                        <div class="carousel-item">
                          <img class="d-block w-100" src="img/slider5.png" alt="Third slide">
                        </div>
                      </div>
                      <a class="carousel-control-prev" href="#carouselExampleIndicators" role="button" data-slide="prev">
                        <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                        <span class="sr-only">Previous</span>
                      </a>
                      <a class="carousel-control-next" href="#carouselExampleIndicators" role="button" data-slide="next">
                        <span class="carousel-control-next-icon" aria-hidden="true"></span>
                        <span class="sr-only">Next</span>
                      </a>
                    </div>
              </div>
          </div>
          <div class="col-sm-12 col-md-4">
              <%  if (user.customer_id > 0) {  %>
                  <div class="row justify-content-between">
                      <div class="col-sm-6 col-md-12 right-first-image" style="background-image: url('img/loginbanner1.png');">
                          <a href="/sleekskincare/signup"></a>
                      </div>
                      <div class="col-sm-6 col-md-12 right-second-image" style="background-image: url('img/loginbanner2.png');">
                          <a href="/sleekskincare/signup"></a>
                      </div>
                  </div>
              <%  } else {    %>
                  <div class="row justify-content-between">
                      <div class="col-sm-6 col-md-12 right-first-image" style="background-image: url('img/bannersmall1.png');">
                          <a href="/sleekskincare/signup"></a>
                      </div>
                      <div class="col-sm-6 col-md-12 right-second-image" style="background-image: url('img/bannersmall2.png');">
                          <a href="/sleekskincare/signup"></a>
                      </div>
                  </div>
              <% } %>
          </div>
      </div>
  </section>

  <section class="container pt-3 pb-3 ad-banner">
      <div class="row align-center justify-content-around">
          <div class="service-card">
              <div class="service-icons">
                  <i class="bx bxs-purchase-tag"></i>
              </div>
              <div class="service-title">
                  <h5>Amazing value Every Day</h5>
              </div>
          </div>

          <div class="vr"></div>

          <div class="service-card-next">
              <div class="service-icons">
                  <i class="bx bxs-check-shield"></i>
              </div>
              <div class="service-title">
                  <h5>Trusted Brand</h5>
              </div>
          </div>

          <div class="vr"></div>

          <div class="service-card-next">
              <div class="service-icons">
                  <i class="bx bxs-truck"></i>
              </div>
              <div class="service-title">
                  <h5>Fast & Free Shipping Over ₱1K</h5>
              </div>
          </div>
      </div>
  </section>

  <section class="container monthly-deals">
      <div class="section-title">
          <h2>Monthly <span>Deals</span></h2>
      </div>
      <div class="row monthly-deals-offers">
          <div class="col-xs-12 col-sm-12 col-md-3 order-xs-2 order-sm-2 order-md-1 special-offer">
              <div class="monthly-countdown">
                  <div class="countdown">00 : 00 : 00 : 00</div>
              </div>
          </div>
          <div class="col-xs-12 col-sm-12 col-md-9 order-xs-1 order-sm-1 order-md-2">
              <div class="row justify-content-around align-items-start all-monthly-offers">

                  <% if (products.length > 0) { %> <% for(let i = 0; i < 8; i++){ %>

                      <div class="col-xs-6 col-sm-6 col-md-3 p-2 card" style="width: 100%;">
                          <a href="/sleekskincare/product-details/<%= products[i].prod_id %>">
                              <img class="card-img-top" src="products/<%=products[i].prod_img%>" alt="Card image cap">
                          </a>
                          <div class="card-body">
                              <p class="offer-title"><%= products[i].prod_name%></p>

                              <% if (user.customer_position == "Distributor") { %> <% let disPrice =products[i].price - (products[i].price * 0.20) %>
                                  <p class="offer-price">₱<%= disPrice %>  <span>₱<%=products[i].price %></span></p>
                              <% } else { %> <% let sePrice =products[i].price - (products[i].price * 0.10) %>
                                  <p class="offer-price">₱<%= sePrice %>  <span>₱<%=products[i].price %></span></p>
                              <% } %>

                              <div class="rate-stars">
                                  <% if (Number.isNaN(Math.floor(products[i].No_Of_Reviews / products[i].Total_No_Of_Reviews))) { %> 
                                      <% for(let i=0; i < 5; i++){ %>
                                          <i class="bx bxs-star nocolor"></i>
                                      <% } %> 
                                  
                                  <% } else { %> <% let rate = Math.floor(products[i].No_Of_Reviews / products[i].Total_No_Of_Reviews); %>
                                      <% for(let i = 0; i < rate; i++){ %>
                                          <i class="bx bxs-star"></i>
                                      <% } %> 
                                      <% let rateForNoColor = 5 - rate; %> 
                                      <% for(let i=0; i < rateForNoColor; i++){ %>
                                          <i class="bx bxs-star nocolor"></i>
                                      <% } %>
                                  <% } %>
                              </div>
                          </div>
                      </div>

                  <% } %> 
                  <% } %>
              </div>
          </div>
      </div>
  </section>

  <section id="smallbanner1" class="container"></section>

  <section class="container all-products">
      <div class="section-title">
          <h2>Our <span>Products</span></h2>
      </div>
      <div class="row justify-content-start align-items-start all-products-grid">
          <% if (products.length > 0) { %> <% for(let i = 0; i < products.length; i++){ %>

              <div class="col-xs-6 col-sm-6 col-md-3 p-2 card" style="width: 100%;">
                  <a href="/sleekskincare/product-details/<%= products[i].prod_id %>">
                      <img class="card-img-top" src="products/<%=products[i].prod_img%>" alt="Card image cap">
                  </a>
                  <div class="card-body">
                      <p class="offer-title"><%= products[i].prod_name%></p>

                      <% if (user.customer_position == "Distributor") { %> <% let disPrice =products[i].price - (products[i].price * 0.20) %>
                          <p class="offer-price">₱<%= disPrice %>  <span>₱<%=products[i].price %></span></p>
                      <% } else { %> <% let sePrice =products[i].price - (products[i].price * 0.10) %>
                          <p class="offer-price">₱<%= sePrice %>  <span>₱<%=products[i].price %></span></p>
                      <% } %>

                      <div class="rate-stars">
                          <% if (Number.isNaN(Math.floor(products[i].No_Of_Reviews / products[i].Total_No_Of_Reviews))) { %> 
                              <% for(let i=0; i < 5; i++){ %>
                                  <i class="bx bxs-star nocolor"></i>
                              <% } %> 
                          
                          <% } else { %> <% let rate = Math.floor(products[i].No_Of_Reviews / products[i].Total_No_Of_Reviews); %>
                              <% for(let i = 0; i < rate; i++){ %>
                                  <i class="bx bxs-star"></i>
                              <% } %> 
                              <% let rateForNoColor = 5 - rate %> 
                              <% for(let i=0; i < rateForNoColor; i++){ %>
                                  <i class="bx bxs-star nocolor"></i>
                              <% } %>
                          <% } %>
                      </div>
                  </div>
              </div>

          <% } %> 
          <% } %>
      </div>
  </section>
  
  <section id="smallbanner2" class="container"></section>


    <!-- -- ======== Start Testimonial ======= -- -->
    <div class="container">
      <section class="reviews-section">
        <div class="reviews-title">
          <div><p>Real Reviews from Sleek Customers</p></div>
          <div class="rate-stars right-side">
            <i class="bx bxs-star"></i>
            <i class="bx bxs-star"></i>
            <i class="bx bxs-star"></i>
            <i class="bx bxs-star"></i>
            <i class="bx bxs-star"></i>
            <span><%=reviews.length%> Reviews</span>
          </div>
        </div>

        <% if (reviews.length > 0) { %> <% for(let i =0; i < reviews.length; i++)   { %>

        <div class="container">
            <div class="col-xs-12 col-sm-12 col-md-6 p-3 m-2 card">
                <div class="row align-items-center justify-content-center">
                    <div class="col-sm-3 prod-img" style="width: 100%; height: 100%;">
                      <% const imageURL = reviews[i].tblproduct.prod_img; %>
                      <% if (imageURL != null) { %> 
                        <img src="products/<%=imageURL%>" alt="<%=imageURL%>" style="object-fit: cover;"/>
                      <% } else { %> 
                        <img src="products/dummyProfile.png" alt="/profiles/dummyProfile.png"/>
                      <% } %> 
                    </div>
                    <div class="col-sm-9">
                        <p style="padding: 0; margin: 0;"><strong><%= reviews[i].tblcustomer.customer_fname%> <%= reviews[i].tblcustomer.customer_lname%></strong></p>
                        <p style="font-size: 0.8rem; padding: 0; margin: 0;"><%= reviews[i].tblcustomer.customer_position %> | <%= new Date(reviews[i].date_recorded).toLocaleDateString(undefined, { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' }) %></p>
                        <div class="rate-stars" style="display: flex; justify-content: start; font-size: 0.7rem;">
                          <% const rateScore = reviews[i].score; %> 
                          <% for(let i = 0; i < rateScore; i++){ %>
                            <i class="bx bxs-star"></i>
                          <% } %> 
                          
                          <% let rateForNoColor = 5 - rateScore %> <% for(let i =0; i < rateForNoColor; i++){ %>
                            <i class="bx bxs-star nocolor"></i>
                          <% } %>
                        </div>
                      
                        <p style="font-size: 0.9rem; margin-top: 0.7rem;"><%=reviews[i].remarks%></p>
                    </div>
                </div>
            </div>
        </div>

        <% } %>
        <% } %>

        </section>
    </div>
    <!-- -- ======== End Testimonial ======= -- -->
    <%- include('../partials/footer'); %>
    <!-- ======== SwiperJS ======= -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Swiper/6.7.5/swiper-bundle.min.js"></script>
    <script src="/js/index.js"></script>
    <script src="/js/dropdown.js"></script>

    <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>

  </body>
</html>
